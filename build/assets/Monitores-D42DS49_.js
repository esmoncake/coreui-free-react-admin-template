import{r as n,j as e}from"./index-Cq3cNOe4.js";import{a as j}from"./axios-Bl1vbFzL.js";import{C as X,a as Y,b as L,c as d,d as Z,e as h,h as _,E as ee}from"./jspdf.es.min-DhbDYEgH.js";import{a as l,c as E}from"./index.esm-BVbxNr3O.js";import{C as ae,a as oe}from"./CRow-CR1dTeP1.js";import{C as se,a as ne}from"./CCardBody-BZy5Kcki.js";import{C as le}from"./CCardHeader-Drjisk7v.js";import{c as re,a as ce,b as te,d as ie}from"./cil-trash-BnkbpAXr.js";import{C as i}from"./CFormInput-CPK1Hc24.js";import{C as D,a as k,b as P,c as T}from"./CModalHeader-DM5zFOOe.js";import{C as w}from"./CFormSelect-sMFcUcNb.js";import"./DefaultLayout-VGzP6Txu.js";const Me=()=>{const[m,p]=n.useState([]),[F,G]=n.useState([]),[r,y]=n.useState(null),[R,C]=n.useState(!1),[U,g]=n.useState(!1),[$,b]=n.useState(!1),[c,I]=n.useState({}),[t,B]=n.useState({marca:"",modelo:"",pulgadas:0,estado:"",ubicacion:0}),[N,q]=n.useState("");n.useEffect(()=>{const a=async()=>{try{const o=await j.get("http://localhost:4000/monitores");p(o.data)}catch(o){console.error("Error fetching Monitores:",o)}},s=async()=>{try{const o=await j.get("http://localhost:4000/areas");G(o.data)}catch(o){console.error("Error fetching areas:",o)}};a(),s()},[]);const W=async()=>{try{const a=await j.post("http://localhost:4000/monitores",t);p([...m,a.data]),g(!1),B({marca:"",modelo:"",pulgadas:0,estado:"",ubicacion:0})}catch(a){console.error("Error adding monitor:",a)}},z=async()=>{try{await j.delete(`http://localhost:4000/Monitores/${r}`);const a=m.filter(s=>s.id!==r);p(a),y(null),b(!1)}catch(a){console.error("Error deleting monitor:",a)}},J=a=>{const s=m.find(o=>o.id===a);I(s),y(a),C(!0)},u=a=>{const{name:s,value:o}=a.target;I({...c,[s]:o})},x=a=>{const{name:s,value:o}=a.target;B({...t,[s]:o})},K=async()=>{try{const a=await j.put(`http://localhost:4000/Monitores/${r}`,c),s=m.map(o=>o.id===r?a.data:o);p(s),C(!1)}catch(a){console.error("Error updating monitor:",a)}},O=()=>{const a=document.getElementById("table-to-pdf");_(a,{scale:2}).then(s=>{const o=s.toDataURL("image/png"),f=new ee("p","mm","a4"),S=210,H=295,v=s.height*S/s.width;let M=v,A=0;for(f.addImage(o,"PNG",0,A,S,v),M-=H;M>=0;)A=M-v,f.addPage(),f.addImage(o,"PNG",0,A,S,v),M-=H;f.save("Monitores.pdf")})},Q=a=>{q(a.target.value)},V=m.filter(a=>a.marca.toLowerCase().includes(N.toLowerCase())||a.modelo.toLowerCase().includes(N.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:e.jsx(oe,{xs:12,children:e.jsxs(se,{className:"mb-2",children:[e.jsxs(le,{children:["Tabla Monitores",e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"d-flex",children:[e.jsxs(l,{color:"primary",onClick:()=>g(!0),className:"me-2",children:[e.jsx(E,{icon:re})," Añadir"]}),e.jsxs(l,{color:"danger",onClick:()=>b(!0),disabled:r===null,className:"me-2",children:[e.jsx(E,{icon:ce})," Eliminar"]}),e.jsxs(l,{color:"info",onClick:()=>J(r),disabled:r===null,className:"me-2",children:[e.jsx(E,{icon:te})," Editar"]}),e.jsxs(l,{color:"success",onClick:O,children:[e.jsx(E,{icon:ie})," Generar PDF"]})]}),e.jsx(i,{type:"text",placeholder:"Buscar por marca o modelo",value:N,onChange:Q,className:"w-25"})]})]}),e.jsx(ne,{children:e.jsxs(X,{id:"table-to-pdf",align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(Y,{className:"text-nowrap",children:e.jsxs(L,{children:[e.jsx(d,{children:"#"}),e.jsx(d,{children:"Marca"}),e.jsx(d,{children:"Modelo"}),e.jsx(d,{children:"Pulgadas"}),e.jsx(d,{children:"Estado"}),e.jsx(d,{children:"Ubicación"})]})}),e.jsx(Z,{children:V.map((a,s)=>e.jsxs(L,{onClick:()=>y(a.id),className:a.id===r?"table-active":"",children:[e.jsx(h,{children:s+1}),e.jsx(h,{children:a.marca}),e.jsx(h,{children:a.modelo}),e.jsx(h,{children:a.pulgadas}),e.jsx(h,{children:a.estado}),e.jsx(h,{children:a.ubicacion})]},a.id))})]})})]})})}),e.jsxs(D,{visible:U,onClose:()=>g(!1),children:[e.jsx(k,{children:e.jsx("h5",{children:"Añadir Monitor"})}),e.jsxs(P,{children:[e.jsx(i,{label:"Marca",name:"marca",value:t.marca,onChange:x}),e.jsx(i,{label:"Modelo",name:"modelo",value:t.modelo,onChange:x}),e.jsx(i,{label:"Pulgadas",name:"pulgadas",type:"number",value:t.pulgadas,onChange:x}),e.jsxs(w,{label:"Estado",name:"estado",value:t.estado,onChange:x,children:[e.jsx("option",{value:"seleccione",children:"Seleccione un estado"}),e.jsx("option",{value:"Nuevo",children:"Nuevo"}),e.jsx("option",{value:"En buenascondiciones",children:"En buenas condiciones"}),e.jsx("option",{value:"Necesita reparacion",children:"Necesita reparacion"})]}),e.jsxs(w,{label:"Ubicación",name:"ubicacion",value:t.ubicacion,onChange:x,children:[e.jsx("option",{value:"",children:"Seleccionar ubicación"}),F.map(a=>e.jsx("option",{value:a.idAreas,children:a.area},a.idAreas))]})]}),e.jsxs(T,{children:[e.jsx(l,{color:"secondary",onClick:()=>g(!1),children:"Cancelar"}),e.jsx(l,{color:"primary",onClick:W,children:"Añadir"})]})]}),e.jsxs(D,{visible:R,onClose:()=>C(!1),children:[e.jsx(k,{children:e.jsx("h5",{children:"Editar Monitor"})}),e.jsxs(P,{children:[e.jsx(i,{label:"Marca",name:"marca",value:c.marca,onChange:u}),e.jsx(i,{label:"Modelo",name:"modelo",value:c.modelo,onChange:u}),e.jsx(i,{label:"Pulgadas",name:"pulgadas",type:"number",value:c.pulgadas,onChange:u}),e.jsxs(w,{label:"Estado",name:"estado",value:c.estado,onChange:u,children:[e.jsx("option",{value:"seleccione",children:"Seleccione un estado"}),e.jsx("option",{value:"Nuevo",children:"Nuevo"}),e.jsx("option",{value:"En buenas condiciones",children:"En buenas condiciones"}),e.jsx("option",{value:"Necesita reparacion",children:"Necesita reparacion"})]}),e.jsx(w,{label:"Ubicación",name:"ubicacion",value:c.ubicacion,onChange:u,children:F.map(a=>e.jsx("option",{value:a.idAreas,children:a.area},a.idAreas))})]}),e.jsxs(T,{children:[e.jsx(l,{color:"secondary",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(l,{color:"primary",onClick:K,children:"Guardar"})]})]}),e.jsxs(D,{visible:$,onClose:()=>b(!1),children:[e.jsx(k,{children:e.jsx("h5",{children:"Eliminar Monitor"})}),e.jsx(P,{children:e.jsx("p",{children:"¿Está seguro de que desea eliminar el monitor seleccionado?"})}),e.jsxs(T,{children:[e.jsx(l,{color:"secondary",onClick:()=>b(!1),children:"Cancelar"}),e.jsx(l,{color:"danger",onClick:z,children:"Eliminar"})]})]})]})};export{Me as default};
